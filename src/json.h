#pragma once

#include "utils.h"
#include <stdbool.h>


////////////////////////////////////////////////////////////////////////////////
///
// typedef struct String String;
typedef struct JsonElement JsonElement;
typedef struct JsonMember JsonMember;
typedef struct JsonArray JsonArray;
typedef struct JsonValue JsonValue;
typedef struct JsonObject JsonObject;

////////////////////////////////////////////////////////////////////////////////
///
typedef enum {
  JSON_BOOL,
  JSON_NUMBER,
  JSON_STRING,
  JSON_ARRAY,
  JSON_OBJECT
} ValueType;

////////////////////////////////////////////////////////////////////////////////
///
struct JsonMember {
  String name;
  JsonElement* element;
  JsonMember* next;
};

////////////////////////////////////////////////////////////////////////////////
///
struct JsonArray {
  JsonElement* elements;
};

////////////////////////////////////////////////////////////////////////////////
///
struct JsonObject {
  JsonMember* members;
};

////////////////////////////////////////////////////////////////////////////////
///
struct JsonValue {
  ValueType type;
  union {
    bool Bool;
    f64 number;
    String string;
    JsonArray* array;
    JsonObject* obj;
  } as;
};

////////////////////////////////////////////////////////////////////////////////
///
struct JsonElement {
  JsonValue* value;
  JsonElement* next;
};

////////////////////////////////////////////////////////////////////////////////
///
typedef struct {
  JsonElement* root;
} JsonDocument;

